# RNRCS
Public repository for the RNRCS package, which pulls data from NRCS for use in R.

## How it works 
This package relies on calling the NRCS AWDB API for data, site metadata and network metadata. When pulling data the package builds an API link to CSV data for the requested site, for all elements (measurement types) reported at the site. The CSV data are then cleaned, and columns of missing data are removed. A list of all elements with missing data is returned as `missingVars` to the global environment. The final data frame is then returned as `NRCS.df`, if no output is specified. 
 
(more information about the underlying API can be found here: https://www.wcc.nrcs.usda.gov/web_service/AWDB_Web_Service_Reference.htm)  
Some returned results for data and metadata are large, so the package may return timeout errors on slow connections. If this happens, break your request down into smaller chunks (month by month data calls, for example).

To find the site info required for getting data or metadata, it's recommended you use the R package **metScanR** (available on CRAN), or the NRCS's mapping service at https://www.wcc.nrcs.usda.gov/webmap_beta/index.html. 

## What is the NRCS/AWDB?
The NRCS is the **Natural Resources Conservation Service** (https://www.wcc.nrcs.usda.gov), a branch of the U.S. Department of Agriculture. It's focus is on providing technical information to ranchers, farmers, and other land owners (primarily in the western United States). However , as the name implies it also has a broader mission of protecting reources such as soil and water. As such, the NRCS collects and hosts a wide array of environmental data. A large portion of the NRCS' data is stored in the **Air and Water Database** (AWDB), which also contains datasets generated by other goverment agencies, such as the Bureau of Reclamation and the U.S. Geological Survey. 

The AWDB's focus is on climate data in the Western United States, and underpins important programs like the Snow Survey and Water Supply Forecasing Programs. Some key data sets in the AWDB are:
 - Snow Depth
 - Precipitation
 - Wind Speed and Direction
 - Air Temperature
 - Humidity
 - Soil Temperature
 - Soil Moisture
 - Streamflow
 - Reservoir Level

## What Data Can I Get With RNRCS?
Currently, the package can only pull data from the SCAN, SNOTEL and SNOLITE networks within the AWDB. Fortunately, these networks measure all of the above variables except for streamflow and reservoir level. Support for pulling data on those elements is coming in future versions of the package.

## What Else is Coming in RNRCS?
In addition to support for pulling hydrologic data, we plan to implement some simple tools for visualizing the returned data. These tools will include:
- A hydrograph plotting function, for a given site and water year
- Wind rose plotting
- Graphical profiles of soil temperature and moisture
- Station comparison tools, for validating data
